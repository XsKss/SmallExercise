<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
    <style>
    #fade-obj{
      width:300px;
      height:300px;
      background:rgba(0,0,0,1);
    }
    </style>
</head>
<body>

  <div id="fade-obj"></div>
  <button id="fade-btn">淡出</button>
  <button id="fade-ru" disabled = true;>淡入</button>

  <script type="text/javascript">
    const obj = document.getElementById('fade-obj');
    const btn = document.getElementById('fade-btn');
    const ru = document.getElementById('fade-ru');
    let dome = window.getComputedStyle(obj).opacity;
    
    function JianBian(){
      dome -= 0.1;
      obj.style.setProperty('opacity',dome);
      i = dome.toFixed(1);
      let t = setTimeout('JianBian()',100);
      console.log(i);
      // 停止计时触发
      if (i == 0) {
        ru.disabled = false;
        btn.disabled = true;
        clearTimeout(t);
      }
    }

    function JianBian2(){
      dome += 0.1;
      obj.style.setProperty('opacity',dome);
      i = dome.toFixed(1);
      let s = setTimeout('JianBian2()',100);
      console.log(dome);
      // 停止计时触发
      if (i == 1) {
        btn.disabled = false;
        ru.disabled = true;
        clearTimeout(s);
      }
    }

    ru.addEventListener('click',JianBian2);
    btn.addEventListener('click',JianBian);
  </script>
</body>
</html>